<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBA Finan√ßas, Banking e Cooperativismo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #ffffff;
            color: #000000;
        }

        .error-message {
            color: red;
            font-size: small;
            margin-top: 2px;
        }

        .container {
            width: 80%;
            margin: auto;
            padding: 20px;
        }

        .header {
            background-color: #2cbc59;
            color: white;
            padding: 20px;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
        }

        .row {
            display: flex;
            margin-top: 20px;
        }

        .col-50 {
            width: 50%;
            padding: 20px;
        }

        .col-33 {
            width: 33.33%;
            padding: 20px;
        }

        .full-col {
            width: 100%;
            text-align: center;
            padding: 20px;
        }

        .cta-button, .ctb-button {
            background-color: #2cbc59;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease-in-out;
        }

        .cta-button:hover {
            background-color: white;
            color: black;
            border: 1px solid #2cbc59;
            font-size: 18px;
        }

        .image {
            width: 100%;
            height: 200px;
        }

        .modal,
        .overlay {
            display: none;
            position: fixed;
        }

        .modal {
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            width: 60%;
            border-radius: 10px;
        }

        .overlay {
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: 500;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .close-button {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .full-width {
            grid-column: span 2;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
        }

        select {
            background-color: white;
            cursor: pointer;
        }

        input[type="submit"] {
            background-color: #2cbc59;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease-in-out;
            font-size: 16px;
            margin-top: 10px;
        }

        input[type="submit"]:hover {
            background-color: #228e44;
        }

        input[type="submit"]:disabled {
            background-color: #cccccc;
            color: #666666;
            cursor: not-allowed;
            border: none;
        }

        .error-input {
            border: 1px solid red !important;
        }

        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            .full-width {
                grid-column: span 1;
            }
            .modal {
                width: 90%;
            }
        }
    </style>
</head>

<body>
    <div class="header">MBA Finan√ßas, Banking e Cooperativismo</div>
    <div class="container">
        <div class="row">
            <div class="col-50">
                <h2>Transforme sua Carreira com o Cooperativismo Financeiro</h2>
                <p>O mercado financeiro est√° evoluindo, e as cooperativas se destacam por sua resili√™ncia, taxas
                    competitivas e impacto local. Com um crescimento de 29% em ativos em 2022, o setor cooperativo prova
                    sua for√ßa e efici√™ncia.</p>
                <button class="cta-button" onclick="openModal()">Quero obter</button>
            </div>
            <div class="col-50">
                <img class="image" src="/src/app/public/image1.jpg" alt="Imagem 1">
            </div>
        </div>

        <div class="row" style="margin-top: 40px;">
            <div class="col-33">
                <h3>Gest√£o Financeira Estrat√©gica</h3>
                <p>Maximize os resultados das cooperativas por meio de uma administra√ß√£o eficiente e colaborativa.</p>
            </div>
            <div class="col-33">
                <h3>Investimentos Inteligentes</h3>
                <p>Descubra como as cooperativas oferecem oportunidades financeiras sustent√°veis e acess√≠veis.</p>
            </div>
            <div class="col-33">
                <h3>Governan√ßa Cooperativa</h3>
                <p>Fortale√ßa a confian√ßa dos cooperados com transpar√™ncia e participa√ß√£o ativa na gest√£o.</p>
            </div>
        </div>

        <div class="row">
            <div class="full-col">
                <button class="cta-button" onclick="openModal()">Quero obter</button>
            </div>
        </div>

        <div class="row">
            <div class="col-50">
                <img class="image" src="/src/app/public/image2.jpg" alt="Imagem 2">
            </div>
            <div class="col-50">
                <h2>Por que Escolher o Cooperativismo?</h2>
                <p>üîπ Taxas justas: Lucros reinvestidos nos cooperados.<br>
                    üîπ Democracia financeira: Cada membro tem voz ativa.<br>
                    üîπ Impacto local: Cr√©dito direcionado para microempresas e projetos regionais.</p>
                <button class="cta-button" onclick="openModal()">Quero obter</button>
            </div>
        </div>
    </div>

    <div class="overlay" id="overlay" onclick="closeModal()"></div>
    <div class="modal" id="modal">
        <div class="modal-header">
            <span>Quero obter</span>
            <button class="close-button" onclick="closeModal()">&times;</button>
        </div>
        <p>Preencha os dados abaixo para receber mais informa√ß√µes sobre o curso:</p>
        <form action="#" method="post">
            <div class="form-grid">
                <div class="form-group">
                    <label for="nome">Nome:</label>
                    <input type="text" id="nome" name="nome" required placeholder="Digite seu nome completo">
                    <div id="nomeError" class="error-message"></div>
                </div>

                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required placeholder="Digite seu email">
                    <div id="emailError" class="error-message"></div>
                </div>

                <div class="form-group">
                    <label for="celular">Celular:</label>
                    <input type="tel" id="celular" name="celular" required placeholder="(00) 0 0000-0000">
                    <div id="celularError" class="error-message"></div>
                </div>

                <div class="form-group">
                    <label for="graduacao">Gradua√ß√£o:</label>
                    <select id="graduacao" name="graduacao" required>
                        <option value="" disabled selected>Selecione sua forma√ß√£o</option>
                        <option value="Ensino Fundamental Incompleto">Ensino Fundamental Incompleto</option>
                        <option value="Ensino Fundamental Completo">Ensino Fundamental Completo</option>
                        <option value="Ensino M√©dio Incompleto">Ensino M√©dio Incompleto</option>
                        <option value="Ensino M√©dio Completo">Ensino M√©dio Completo</option>
                        <option value="Ensino T√©cnico Incompleto">Ensino T√©cnico Incompleto</option>
                        <option value="Ensino T√©cnico Completo">Ensino T√©cnico Completo</option>
                        <option value="Ensino Superior Incompleto">Ensino Superior Incompleto</option>
                        <option value="Ensino Superior Completo">Ensino Superior Completo</option>
                        <option value="P√≥s-Gradua√ß√£o Incompleta">P√≥s-Gradua√ß√£o Incompleta</option>
                        <option value="P√≥s-Gradua√ß√£o Completa">P√≥s-Gradua√ß√£o Completa</option>
                        <option value="Mestrado Incompleto">Mestrado Incompleto</option>
                        <option value="Mestrado Completo">Mestrado Completo</option>
                        <option value="Doutorado Incompleto">Doutorado Incompleto</option>
                        <option value="Doutorado Completo">Doutorado Completo</option>
                        <option value="P√≥s-Doutorado">P√≥s-Doutorado</option>
                    </select>
                    <div id="graduacaoError" class="error-message"></div>
                </div>

                <div class="form-group">
                    <label for="cargo">Cargo:</label>
                    <input type="text" id="cargo" name="cargo" required placeholder="Digite seu cargo atual">
                    <div id="cargoError" class="error-message"></div>
                </div>

                <div class="form-group">
                    <label for="salario">Faixa Salarial:</label>
                    <input type="text" id="salario" name="salario" required placeholder="R$ 0,00">
                    <div id="salarioError" class="error-message"></div>
                </div>

                <div class="form-group full-width">
                    <input type="submit" class="ctb-button" value="Enviar" disabled>
                </div>
            </div>
        </form>
    </div>
    </div>
    <script>
    //   function openModal() {
    //       document.getElementById("modal").style.display = "block";
    //       document.getElementById("overlay").style.display = "block";
    //   }
    //   function closeModal() {
    //       document.getElementById("modal").style.display = "none";
    //       document.getElementById("overlay").style.display = "none";
    //   }
    //   document.getElementById("registroForm").addEventListener("submit", function(event) {
    //         event.preventDefault();

    //         const formData = new FormData(this);

    //         fetch("/register", {
    //             method: "POST",
    //             body: formData
    //         })
    //         .then(response => {
    //             if (response.ok) {
    //                 alert("Dados enviados com sucesso!");
    //                 closeModal();
    //                 this.reset();
    //             } else {
    //                 alert("Erro ao enviar os dados. Tente novamente.");
    //             }
    //         })
    //         .catch(error => {
    //             console.error("Erro:", error);
    //             alert("Erro ao enviar os dados.");
    //         });
    //     });
    document.addEventListener("DOMContentLoaded", function () {
    const modal = document.getElementById("modal");
    const overlay = document.getElementById("overlay");
    const closeButton = document.querySelector(".close-button");
    const ctaButtons = document.querySelectorAll(".cta-button");
    const submitButton = document.querySelector("input[type='submit']");
    
    const touchedFields = {
        nome: false,
        email: false,
        celular: false,
        graduacao: false,
        cargo: false,
        salario: false
    };
    
    function openModal() {
        modal.style.display = "block";
        overlay.style.display = "block";
    }
    
    function closeModal() {
        modal.style.display = "none";
        overlay.style.display = "none";
        form.reset();
        hideAllErrors();
        updateSubmitButtonState();
        
        Object.keys(touchedFields).forEach(key => {
            touchedFields[key] = false;
        });
    }
    
    ctaButtons.forEach(button => {
        button.addEventListener("click", openModal);
    });
    
    closeButton.addEventListener("click", closeModal);
    overlay.addEventListener("click", closeModal);
    
    const form = document.querySelector("form");
    const nomeInput = document.getElementById("nome");
    const emailInput = document.getElementById("email");
    const celularInput = document.getElementById("celular");
    const graduacaoInput = document.getElementById("graduacao");
    const cargoInput = document.getElementById("cargo");
    const salarioInput = document.getElementById("salario");
    
    salarioInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        value = (value/100).toFixed(2) + '';
        value = value.replace(".", ",");
        value = value.replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
        e.target.value = 'R$ ' + value;
        if (touchedFields.salario) validateSalario();
        updateSubmitButtonState();
    });
    
    celularInput.addEventListener('input', function(e) {
        let input = e.target;
        let value = input.value.replace(/\D/g, '');
        let formattedValue = '';
        
        if (value.length > 0) formattedValue = '(' + value.substring(0, 2);
        if (value.length > 2) formattedValue += ') ' + value.substring(2, 3);
        if (value.length > 3) formattedValue += ' ' + value.substring(3, 7);
        if (value.length > 7) formattedValue += '-' + value.substring(7, 11);
        
        input.value = formattedValue;
        if (touchedFields.celular) validateCelular();
        updateSubmitButtonState();
    });
    
    function setupValidation(inputElement, validationFn, fieldName) {
        inputElement.addEventListener('focus', function() {
            touchedFields[fieldName] = true;
        });
        
        inputElement.addEventListener('input', function() {
            if (touchedFields[fieldName]) {
                validationFn();
            }
            updateSubmitButtonState();
        });
        
        inputElement.addEventListener('blur', function() {
            touchedFields[fieldName] = true;
            validationFn();
            updateSubmitButtonState();
        });
    }
    
    setupValidation(nomeInput, validateNome, 'nome');
    setupValidation(emailInput, validateEmail, 'email');
    setupValidation(celularInput, validateCelular, 'celular');
    setupValidation(graduacaoInput, validateGraduacao, 'graduacao');
    setupValidation(cargoInput, validateCargo, 'cargo');
    setupValidation(salarioInput, validateSalario, 'salario');
    
    function validateNome() {
        const nome = nomeInput.value.trim();
        if (nome === '') {
            if (touchedFields.nome) {
                showError('nome', 'Por favor, insira seu nome completo');
            }
            return false;
        }
        hideError('nome');
        return true;
    }

    function validateEmail() {
        const email = emailInput.value.trim();
        if (email === '') {
            if (touchedFields.email) {
                showError('email', 'Por favor, insira seu email');
            }
            return false;
        }
        
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            if (touchedFields.email) {
                showError('email', 'Por favor, insira um email v√°lido');
            }
            return false;
        }
        
        hideError('email');
        return true;
    }

    function validateCelular() {
        const celular = celularInput.value.replace(/\D/g, '');
        if (celular.length < 11) {
            if (touchedFields.celular) {
                showError('celular', 'Por favor, insira um n√∫mero v√°lido com DDD');
            }
            return false;
        }
        hideError('celular');
        return true;
    }

    function validateGraduacao() {
        const graduacao = graduacaoInput.value;
        if (graduacao === '') {
            if (touchedFields.graduacao) {
                showError('graduacao', 'Por favor, selecione sua forma√ß√£o');
            }
            return false;
        }
        hideError('graduacao');
        return true;
    }

    function validateCargo() {
        const cargo = cargoInput.value.trim();
        if (cargo === '') {
            if (touchedFields.cargo) {
                showError('cargo', 'Por favor, insira seu cargo');
            }
            return false;
        }
        hideError('cargo');
        return true;
    }

    function validateSalario() {
        const salario = salarioInput.value.trim();
        if (salario === '' || salario === 'R$ 0,00') {
            if (touchedFields.salario) {
                showError('salario', 'Por favor, insira sua faixa salarial');
            }
            return false;
        }
        hideError('salario');
        return true;
    }
    
    function showError(fieldId, message) {
        const errorElement = document.getElementById(`${fieldId}Error`);
        const inputElement = document.getElementById(fieldId);
        
        errorElement.textContent = message;
        errorElement.style.display = 'block';
        inputElement.classList.add('error-input');
    }
    
    function hideError(fieldId) {
        const errorElement = document.getElementById(`${fieldId}Error`);
        const inputElement = document.getElementById(fieldId);
        
        errorElement.style.display = 'none';
        inputElement.classList.remove('error-input');
    }
    
    function hideAllErrors() {
        ['nome', 'email', 'celular', 'graduacao', 'cargo', 'salario'].forEach(fieldId => {
            hideError(fieldId);
        });
    }
    
    function updateSubmitButtonState() {
        const isNomeValid = validateNome();
        const isEmailValid = validateEmail();
        const isCelularValid = validateCelular();
        const isGraduacaoValid = validateGraduacao();
        const isCargoValid = validateCargo();
        const isSalarioValid = validateSalario();
        
        const isNomeFilled = nomeInput.value.trim() !== '';
        const isEmailFilled = emailInput.value.trim() !== '';
        const isCelularFilled = celularInput.value.replace(/\D/g, '').length >= 11;
        const isGraduacaoFilled = graduacaoInput.value !== '';
        const isCargoFilled = cargoInput.value.trim() !== '';
        const isSalarioFilled = salarioInput.value.trim() !== '' && salarioInput.value.trim() !== 'R$ 0,00';
        
        submitButton.disabled = !(isNomeValid && isEmailValid && isCelularValid && 
                                isGraduacaoValid && isCargoValid && isSalarioValid &&
                                isNomeFilled && isEmailFilled && isCelularFilled &&
                                isGraduacaoFilled && isCargoFilled && isSalarioFilled);
    }
    
    form.addEventListener("submit", async function (event) {
        event.preventDefault();
        
        Object.keys(touchedFields).forEach(key => {
            touchedFields[key] = true;
        });
        
        const isNomeValid = validateNome();
        const isEmailValid = validateEmail();
        const isCelularValid = validateCelular();
        const isGraduacaoValid = validateGraduacao();
        const isCargoValid = validateCargo();
        const isSalarioValid = validateSalario();
        
        if (!isNomeValid || !isEmailValid || !isCelularValid || 
            !isGraduacaoValid || !isCargoValid || !isSalarioValid) {
            updateSubmitButtonState();
            return;
        }
        
        const originalButtonValue = submitButton.value;
        
        try {
            submitButton.disabled = true;
            submitButton.value = "Enviando...";
            
            const formData = {
                nome: nomeInput.value.trim(),
                email: emailInput.value.trim(),
                celular: celularInput.value.replace(/\D/g, ''),
                graduacao: graduacaoInput.value,
                cargo: cargoInput.value.trim(),
                salario: salarioInput.value.trim()
            };
            
            const response = await fetch("/register", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(formData),
            });
            
            const result = await response.json();
            
            if (response.ok) {
                alert("Cadastro realizado com sucesso!");
                closeModal();
            } else {
                alert("Erro: " + (result.message || "Erro desconhecido"));
            }
        } catch (error) {
            alert("Cadastrado com sucesso!");
            console.error("Erro:", error);
        } finally {
            submitButton.disabled = false;
            submitButton.value = originalButtonValue;
        }
    });
});
    </script>
</body>
</html>
